#!/usr/bin/env bash
set -euo pipefail

PYTHON=python3
SCRIPT=ligo_spectral_planck.py

EVENT_PARAMS=event_params.json
REFS=ligo_refs.json
OUTDIR=results

mkdir -p "$OUTDIR"

EVENTS=(
  GW150914
  GW151226
  GW170104
  GW170809
  GW170814
  GW170823
  GW190403_051519
  GW190408_181802
  GW190412
  GW190413_052954
  GW190413_134308
  GW190421_213856
  GW190426_190642
  GW190503_185404
  GW190512_180714
  GW190513_205428
  GW190514_065416
  GW190517_055101
  GW190519_153544
  GW190521
  GW190521_074359
  GW190527_092055
  GW190602_175927
  GW190701_203306
  GW190706_222641
  GW190707_093326
  GW190719_215514
  GW190720_000836
  GW190727_060333
  GW190728_064510
  GW190731_140936
  GW190803_022701
  GW190805_211137
  GW190828_063405
  GW190828_065509
  GW190910_112807
  GW190915_235702
  GW190916_200658
  GW190924_021846
  GW190929_012149
  GW190930_133541
  GW191109_010717
  GW191126_115259
  GW191127_050227
  GW191129_134029
  GW191204_171526
  GW191215_223052
  GW191222_033537
  GW191230_180458
  GW200128_022011
  GW200129_065458
  GW200202_154313
  GW200208_222617
  GW200219_094415
  GW200220_061928
  GW200220_124850
  GW200224_222234
  GW200225_060421
  GW200306_093714
  GW200308_173609
  GW200311_115853
  GW200316_215756
  GW200322_091133
)

for ev in "${EVENTS[@]}"; do
  echo "â–¶ Processing $ev"


  python "$SCRIPT" \
    --event "$ev" \
    --event-params "$EVENT_PARAMS" \
    --refs "$REFS" \
    --ref-key energy_J \
    --peak-quantile 0.95 --verbose   --clusters-json clusters.json   --exclude-clusters -1
done
echo "results written in results/"
